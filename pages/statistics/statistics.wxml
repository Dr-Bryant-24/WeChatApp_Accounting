<!--pages/statistics/statistics.wxml-->
<view class="container">
  <!-- æœˆä»½é€‰æ‹©å™¨ -->
  <view class="month-selector">
    <view class="month-btn" bindtap="prevMonth">
      <text class="icon">â—€</text>
    </view>
    <picker mode="date" fields="month" value="{{currentDate}}" bindchange="dateChange">
      <view class="current-month">{{currentYear}}å¹´{{currentMonth}}æœˆ</view>
    </picker>
    <view class="month-btn" bindtap="nextMonth">
      <text class="icon">â–¶</text>
    </view>
  </view>

  <!-- æ€»è§ˆå¡ç‰‡ -->
  <view class="overview-card">
    <view class="overview-header">æœ¬æœˆæ”¶æ”¯</view>
    <view class="overview-content">
      <view class="overview-item">
        <text class="label">æ”¶å…¥</text>
        <text class="amount income">Â¥{{totalIncome}}</text>
      </view>
      <view class="divider"></view>
      <view class="overview-item">
        <text class="label">æ”¯å‡º</text>
        <text class="amount expense">Â¥{{totalExpense}}</text>
      </view>
    </view>
  </view>

  <!-- åˆ†ç±»ç»Ÿè®¡å¡ç‰‡ -->
  <view class="stats-card">
    <view class="card-header">
      <text class="title">æ”¯å‡ºåˆ†ç±»</text>
      <text class="subtitle">æŒ‰æ”¯å‡ºé‡‘é¢æ’åº</text>
    </view>
    
    <view class="stats-list">
      <view class="stats-item" wx:for="{{expenseStats}}" wx:key="category">
        <view class="category-info">
          <view class="category-left">
            <view class="category-icon">{{item.icon || 'ğŸ’°'}}</view>
            <view class="category-detail">
              <text class="category-name">{{item.category}}</text>
              <text class="category-amount">Â¥{{item.amount}}</text>
            </view>
          </view>
          <text class="category-percent">{{item.percent}}%</text>
        </view>
        <view class="progress-bar">
          <view class="progress" style="width: {{item.percent}}%; background: linear-gradient(135deg, #43cea2, #185a9d)"></view>
        </view>
      </view>
    </view>
  </view>
</view>