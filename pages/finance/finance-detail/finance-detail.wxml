<view class="container">
  <!-- äº§å“ä¿¡æ¯å¡ç‰‡ -->
  <view class="product-info">
    <view class="product-name">{{product.name}}</view>
    <view class="stats-grid">
      <view class="stat-item">
        <view class="stat-label">æŠ•å…¥é‡‘é¢</view>
        <view class="stat-value">Â¥{{product.amount}}</view>
      </view>
      <view class="stat-item">
        <view class="stat-label">ç´¯è®¡å¤©æ•°</view>
        <view class="stat-value">{{totalDays}}å¤©</view>
      </view>
      <view class="stat-item">
        <view class="stat-label">å¹³å‡æ—¥æ”¶ç›Š</view>
        <view class="stat-value">Â¥{{averageReturn}}</view>
      </view>
      <view class="stat-item">
        <view class="stat-label">ç´¯è®¡æ”¶ç›Š</view>
        <view class="stat-value">Â¥{{totalReturn}}</view>
      </view>
      <view class="stat-item">
        <view class="stat-label">å¹´åŒ–æ”¶ç›Šç‡</view>
        <view class="stat-value">{{annualizedRate}}%</view>
      </view>
      <view class="stat-item">
        <view class="stat-label">ä¸‡ä»½æ”¶ç›Š</view>
        <view class="stat-value">Â¥{{dailyReturnPer10k}}</view>
      </view>
    </view>
  </view>

  <!-- æ”¶ç›Šè®°å½•åˆ—è¡¨ -->
  <view class="returns-list">
    <view class="list-header">
      <text class="list-title">æ”¶ç›Šè®°å½•</text>
      <view class="import-btn" bindtap="importFromText">æ‰¹é‡å¯¼å…¥</view>
    </view>

    <block wx:if="{{returns.length > 0}}">
      <block wx:for="{{returns}}" wx:key="date">
        <!-- æœˆåº¦æ€»ç»“ -->
        <view class="monthly-summary" wx:if="{{item.isMonthly}}">
          <view class="summary-header">
            <text class="month-text">{{item.month}}æœˆæ€»ç»“</text>
            <view class="summary-divider"></view>
          </view>
          <view class="summary-content">
            <view class="summary-item">
              <text class="summary-label">æœˆåº¦æ”¶ç›Š</text>
              <text class="summary-value">Â¥{{item.totalReturn}}</text>
            </view>
            <view class="summary-item">
              <text class="summary-label">å¹´åŒ–æ”¶ç›Šç‡</text>
              <text class="summary-value rate">{{item.annualizedRate}}%</text>
            </view>
          </view>
        </view>

        <!-- æ—¥å¸¸æ”¶ç›Šè®°å½• -->
        <view class="return-item" wx:else bindtap="showActionSheet" data-return="{{item}}">
          <view class="return-left">
            <view class="return-date">{{item.date}}</view>
            <view class="return-remark" wx:if="{{item.remark}}">{{item.remark}}</view>
          </view>
          <view class="return-info">
            <text class="return-amount">Â¥{{item.amount}}</text>
          </view>
        </view>
      </block>
    </block>
    
    <view class="empty-state" wx:else>
      <view class="empty-icon">ğŸ“Š</view>
      <view class="empty-text">æš‚æ— æ”¶ç›Šè®°å½•</view>
    </view>
  </view>

  <!-- åº•éƒ¨å¼¹å‡ºçš„æ—¥æœŸé€‰æ‹©å™¨ -->
  <view class="date-picker-popup" wx:if="{{showDatePicker}}">
    <view class="mask" bindtap="cancelDatePicker"></view>
    <view class="picker-content">
      <view class="picker-header">
        <text class="cancel" bindtap="cancelDatePicker">å–æ¶ˆ</text>
        <text class="title">é€‰æ‹©æ—¥æœŸ</text>
        <text class="confirm" bindtap="confirmDatePicker">ç¡®å®š</text>
      </view>
      <picker-view class="picker-view" indicator-class="indicator" value="{{value}}" bindchange="bindDateChange">
        <picker-view-column>
          <view wx:for="{{years}}" wx:key="*this" class="picker-item">{{item}}å¹´</view>
        </picker-view-column>
        <picker-view-column>
          <view wx:for="{{months}}" wx:key="*this" class="picker-item">{{item < 10 ? '0' + item : item}}æœˆ</view>
        </picker-view-column>
        <picker-view-column>
          <view wx:for="{{days}}" wx:key="*this" class="picker-item">{{item < 10 ? '0' + item : item}}æ—¥</view>
        </picker-view-column>
      </picker-view>
    </view>
  </view>
</view> 